{"title":"小k的博客","description":"华东交通大学13级，高级前端工程师。擅长各项前端技能，深入研究移动端开发与前端性能。非专业视觉设计师。此为博客一枚。","language":"","link":"//htmlk.cn","pubDate":"Tue, 07 Nov 2017 10:55:00 GMT","lastBuildDate":"Thu, 23 Nov 2017 09:01:03 GMT","generator":"hexo-generator-json-feed","webMaster":"小k","items":[{"title":"谈谈人为何会沉迷游戏？","link":"//htmlk.cn/2017/11/07/something-about-immersion/","description":"为何人会沉迷？这个模型很有意思。 当人在“得到技能提升”和“获得挑战后的成就感”这两者中得到一定平衡时，就会陷入沉迷，这个平衡的范围称之为“心流”（flow）。人处在心流状态下，就会陷入沉迷。","pubDate":"Tue, 07 Nov 2017 10:55:00 GMT","guid":"//htmlk.cn/2017/11/07/something-about-immersion/","category":"旧事,产品"},{"title":"web worker简易入门","link":"//htmlk.cn/2017/09/25/web-worker-learning/","description":"js是单线程的语言，由于此特性，我们在处理并发时需要用到一些技巧，如setTimeout()，setInterval()，调用XMLHttpRequest等。但这里的并发只是非阻塞（参照John Resig的文章How JavaScript Timers Work），真正的多线程编程则需要HTML5的web worker。","pubDate":"Mon, 25 Sep 2017 02:55:00 GMT","guid":"//htmlk.cn/2017/09/25/web-worker-learning/","category":"html5,web"},{"title":"失眠故事三【飞行家的两个魔术】","link":"//htmlk.cn/2017/08/22/two-magics-of-the-pilot/","description":"一个魔术，不足以让他成为魔术师。一个魔术，却让他成为了飞行家。 自家的木房建在悬崖边上，天堂与地狱相对望。飞行家说，住在这里，感觉自己像是传递天地信息的青鸟。","pubDate":"Mon, 21 Aug 2017 20:23:00 GMT","guid":"//htmlk.cn/2017/08/22/two-magics-of-the-pilot/","category":"故事"},{"title":"兔子，胡萝卜与OAuth的故事","link":"//htmlk.cn/2017/08/20/oauth-rabbit/","description":"那些简单的故事，就别用复杂的方式传诵 ##【让我来讲几个故事吧】 从前，有只老兔子，在仓库里存了一万根胡萝卜，作为给小兔子的遗产。而后他就去周游世界了。小兔子有天想去把萝卜拿出来，却被仓库外的一只兔子拦住了。一问才知道，这是老兔子安排的仓库守卫。和所有故事中的守护者一样，他正直而古板，八字眉下面有着睡眠不足的熊猫眼，世人一般称他为兔门神。兔子想要拿到萝卜，就得说服兔门神呀，于是他走了上前…","pubDate":"Sun, 20 Aug 2017 04:55:00 GMT","guid":"//htmlk.cn/2017/08/20/oauth-rabbit/","category":"web"},{"title":"三台戏","link":"//htmlk.cn/2017/08/20/three-drama/","description":"某天，我站在地铁口的一幅海报前。 巨大的国际象棋棋盘横据画面中心，棋盘微斜，偏移的角度恰好。纹理和刻痕显然是精心设计，至少要用掉三个图层。哑光效果也异常出色。除去文案，这是难得一见的好海报。 但这么多的细节，都是大脑正常运作时所认知到的。我的第一个想法，或者说是直觉，是看着这黑白的格子，就掏出了手机扫一扫…中毒至斯。 但我后来又想，这种“入戏太深”的场景和程序员这一职业不无关系…","pubDate":"Sat, 19 Aug 2017 17:18:00 GMT","guid":"//htmlk.cn/2017/08/20/three-drama/","category":"旧事,生活"},{"title":"再议减少HTTP请求","link":"//htmlk.cn/2017/08/14/reduce-http-requests/","description":"前言:关于web性能，有两个著名论断： 0.1-0.2s 用户认为是即时的；1-5s 用户觉得自己能与信息流畅地交互；5-10s 用户开始转移注意力——Robert Miller 用户所接受的数据，有80~90%的时间都耗在前端上——Steve Souders 前者说明，loading图（以下简称菊花）是必要的。人处于“开始转移注意力”时，这朵菊花就开始挽留你躁动的心。但web工程师的一个使命，就是通过提升性能，不让用户看到菊花。菊花要有，但不能常有，真是一朵磨人的小妖精… 后者说明，资源的加载和渲染可以大做文章。因为一个html文件，几乎是所有资源的承载器，哪些优先加载，怎样加载，都是前端工程师可以控制的。 再议减少HTTP请求：“尽量减少HTTP请求，减少DNS查找”这是Yslow写在最前面的两条规则。而放之实际，可能会遇到挑战。为何？因为我们完成了“降低请求数”的目标，但可能损失了其他方面的指标。 a. 没有浏览器缓存减少HTTP请求，很常用的做法就是把js和css资源inline到html里。这样的做法，自然没有浏览器缓存，重复加载时连静态资源也必须加载。也许有人又说，我可以把整个html文件都缓存啊！的确可以，但以web开发的更新速度，html文件一般都不设或设置很短时间（5 min?）缓存。另外在web2.0时代里，html缓存会带来不必要的问题。比如登录前后，页面资源展示不一样，那么我们就得慎用html缓存。 b. 没有cdn缓存这个很好理解，任何的内联资源，由于依赖于html，都必须从源服务器而不是cdn服务器返回。 c. 不能按需加载为了按需加载，前端工程师可谓想法各异，天马行空。比如图片的lazyload技术，异步加载js脚本，而inline的方式恰恰将一切想法摁回脑中。 d. 浏览器预解析DNS失效现代浏览器有预解析DNS技术。简单来说，就是页面下载到浏览器时，先扫描一遍，在这时发现域名并预解析DNS。这样的前置解析跟dom渲染等操作同步执行，诚然会使浏览器更快。但如果你的html页面因为内联了太多内容（base64图片），大于5M时，浏览器的预解析DNS将会失效。 最佳实践因而，我们时常像那只捡芝麻丢西瓜的熊。如此平衡这两者呢，业界给我们两个很好的案例。 Demo1 必应 首次内联CSS与JS 将资源取出，并保存在localStorage中 资源名（版本）保存在cookie中 后续请求中，服务器检查对应的cookie 根据cookie的值，只嵌入新的脚本 加载时，从localStorage里载入资源 Demo2 百度(移动端) 首次将静态资源打包，用jsonp统一返回 将资源解析并保存在localStorage中 再次访问时检查localStorage中资源情况 如有缺失再发请求获取资源 必应的做法确保了首次的http请求最少，后续充分发挥增量更新（当然粒度还是文件）的优势提高性能，但缺点是cookie并不可靠。百度则是把首次静态资源的http请求降低到一次，非常暴力的把全部css，js打包成字符串，以jsonp返回。宁愿用str转obj的解析时间去换取加载时间。而随V8引擎的强大，这点解析的时间也将越来越不值得提起。总而言之，这两个Demo都把http请求尽可能的降低，而后都利用了本地存储去获得资源。 我有时候会想起那把由无名的铁匠用三个小时粗制而成的小李飞刀。你得对技术怀敬畏之心。因为那些谁都懂的技术，在某些人的手里，还真能变出花儿来。","pubDate":"Mon, 14 Aug 2017 05:10:00 GMT","guid":"//htmlk.cn/2017/08/14/reduce-http-requests/","category":"html5,前端,性能"},{"title":"谈谈OAuth1,OAuth2异同","link":"//htmlk.cn/2017/08/11/brief-oauth/","description":"##一、写在前面在收集资料时，我查询和学习了许多介绍OAuth的文章，这些文章有好有坏，但大多是从个例出发。因此我想从官方文档出发，结合在stackoverflow上的一些讨论，一并整理一下。整理的内容分为OAuth1.0a和OAuth2两部分。 OAuth 1.0a：One Leg -&gt;Two Leg -&gt; Three LeggedOAuth 2:Two Leg -&gt;Three Legged (附：Refresh Token的方式) 这两种模式都是按箭头从左往右安全性递增，其实现也会相对复杂。关于官方的这种leg（腿？）的说法，在中文翻译中比较少有文章提及。下面分别来介绍OAuth的这5种授权流程。","pubDate":"Fri, 11 Aug 2017 02:55:00 GMT","guid":"//htmlk.cn/2017/08/11/brief-oauth/","category":"web"},{"title":"一个文件夹的自我介绍","link":"//htmlk.cn/2017/07/25/folder-to-tree/","description":"#folder2tree 用字符展示文件夹结构 前言 Before:如何介绍一个文件夹，简直纠结。 要么图片，如果在截图前，你真的愿意，一层一层一层的剥开我的心。你会鼻酸你会流泪；要么靠说，那么你可能得这么说：从前，有一个文件夹，文件夹里有两张图片；大图片在跟小图片讲故事…讲个什么故事额 因而，用纯字符描述文件夹的小工具必须得有呀。github here.","pubDate":"Tue, 25 Jul 2017 00:52:00 GMT","guid":"//htmlk.cn/2017/07/25/folder-to-tree/","category":"js,工具"},{"title":"反击爬虫，前端工程师的脑洞可以有多大？","link":"//htmlk.cn/2017/07/09/prevent-spiders/","description":"1. 前言对于一张网页，我们往往希望它是结构良好，内容清晰的，这样搜索引擎才能准确地认知它。而反过来，又有一些情景，我们不希望内容能被轻易获取，比方说电商网站的交易额，教育网站的题目等。因为这些内容，往往是一个产品的生命线，必须做到有效地保护。这就是爬虫与反爬虫这一话题的由来。","pubDate":"Sun, 09 Jul 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/07/09/prevent-spiders/","category":"安全,前端"},{"title":"失眠故事五【花匠与候鸟】","link":"//htmlk.cn/2017/06/05/my-fairy-tale4/","description":"一、每个春天，候鸟都会来到这片花田。每个不是春天的季节，花匠总在认真地打理花田。花匠想让一切看起来未来可期，因为他喜欢这只候鸟。喜欢，是因为他们都爱花。那些关于花的话题，他们永远聊不完。 有一个春天，候鸟跟花匠说起了她家乡的雪莲。这种花，花匠从来没听说过。但每次说起雪莲，花匠都能注意到她眼中飞扬的光亮。是的，那是候鸟最心爱的花儿。","pubDate":"Sun, 04 Jun 2017 19:55:00 GMT","guid":"//htmlk.cn/2017/06/05/my-fairy-tale4/","category":"故事"},{"title":"前端安全冷门知识杂谈","link":"//htmlk.cn/2017/05/27/safety-point-of-view-from-front-end/","description":"零、概述提起web前端安全，大家都会想到两个名词：xss和csrf。抛去这最常见，最被广泛应用的两者，我想谈谈一些难以觉察的，比较偏门的安全关注点。大概分为以下章节： 盗取无法用js读写的Cookie删不掉的本地存储函数覆写监听上报内存Cookie与硬盘CookieCSS带来的点击量泄露JSONP回调函数与UTF-7编码过滤与代码混淆心理学与社会工程学 资料略多，文章较长，请自备瓜子…","pubDate":"Sat, 27 May 2017 15:52:00 GMT","guid":"//htmlk.cn/2017/05/27/safety-point-of-view-from-front-end/","category":"web"},{"title":"江南见闻","link":"//htmlk.cn/2017/05/22/diary-2017-0521-0527/","description":"扬起帆这个4月真的特别丧…开心的事情屈指可数，貌似也只有朴树的新专辑了。 病后状态一直不好，工作时脑后阴风习习bug，变成了巨大的飞蛾，每每衔着灵魂四方飘游。周四晚，无耻地逃了一个会议下班，拖着疲惫的身体，径直就飞往了杭州。 都这么累了，问自己为什么又在路上了呢？可能只是我觉得，旅行的时候不用去想以前和以后。但旅行那么短，而生活那么长那就更应该不停的出发吧？即使只是一场短暂的幻觉。 我这么想着的时候，这场幻觉正变得越来越真实。凌晨让头脑额外清醒，飞机下出现了新城灯火穿透了夜色与云层，越来越浓，背后的飞蛾被引诱扑了下去——烟消云散。","pubDate":"Mon, 22 May 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/05/22/diary-2017-0521-0527/","category":"旧事"},{"title":"网易“聚合阅读”布局的实现","link":"//htmlk.cn/2017/05/03/my-news-reader-box/","description":"网易聚合阅读的出现的确让人惊艳了一下。流畅的交互,使碎片化的新闻资讯像报纸一样摊在眼前,这是信息大爆炸的时代产物。不管你能不能接受这种新阅读形式，事实上，每天越来越多的新闻层出不穷，还没被人看到就已成为了“旧闻”。回归报纸的版面设计，堆叠新闻模块，让用户告别一条接一条整齐的新闻链接，而是在一个版面上提供更多的信息，不失为一种尝试。 而抛去产品的层面，从前端方向来看，“聚合阅读”也有许多值得学习的地方。这几天研究了一下源码，谈谈它随机布局的实现，以及一些优化的措施。 ##demo 点击按钮可以改变布局：","pubDate":"Wed, 03 May 2017 02:55:00 GMT","guid":"//htmlk.cn/2017/05/03/my-news-reader-box/","category":"js"},{"title":"病中记 4.16-4.22","link":"//htmlk.cn/2017/04/22/diary-2017-0416-0422/","description":"4月马上就要过去似乎日历上，径直就能从3月翻到5月。时间怎么这么快？ 长眠于4月之前的海子，对于时间，有一个生动的说法叫“打马而过”有时觉得，这种匀速流淌不可变的东西，才是真TM的残忍。长江水的结局，就是流到太平洋没有任何意外能让它流到大西洋 所以你说，有时意外的中断多可爱？红绿灯多好呀，给你走走停停的机会小病多好呀，静下来休息和幻想悲伤多好呀，欢乐可放歌，悲伤可饮酒 工作忙完了这阵子那条安静而蜿蜒的时间之河，好像真的幻化成了打马的鞭子梦中啪的一声惊响，病倒了。","pubDate":"Sat, 22 Apr 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/04/22/diary-2017-0416-0422/","category":"旧事"},{"title":"决战前后 2.12 - 2.18","link":"//htmlk.cn/2017/02/19/diary-2017-0212-0218/","description":"终于是把T3评审的事情忙完周末躺在床上整个人都不想动，空虚无比，宛如智障。这种状态，只有高考结束时出现过那时我的日记里写着：“我站在太阳下，就是金灿灿的咸鱼；我躺在被窝里，就是阴绵绵的豆腐脑…”别说这是神比喻。 因为这次评审，确实耗费了挺大的精力关键还是在年后返工的第一周，你正吃着元宵唱着歌突然跑出个班主任说：咱放完寒假就高考，好吗？好生气哦，但还要保持微笑。况且想想，年终奖好像还没发哎…","pubDate":"Sun, 19 Feb 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/02/19/diary-2017-0212-0218/","category":"旧事"},{"title":"pjax: 当ajax遇上pushState","link":"//htmlk.cn/2017/02/12/about-pjax/","description":"var pjax = pushState + ajax;小时候，小浣熊方便面里面有各种水浒人物的卡片。我买了一包，吃了方便面，饱了。而我又买了第二包，不是想吃方便面，而是仅仅想得到里面的卡片…","pubDate":"Sun, 12 Feb 2017 00:55:00 GMT","guid":"//htmlk.cn/2017/02/12/about-pjax/","category":"js,html5"},{"title":"美丽新世界","link":"//htmlk.cn/2017/02/10/brave-new-world/","description":"痛仰有一首歌，叫《美丽新世界》，它其实是向80年前赫胥黎的同名小说致敬。歌里唱道：“这是一个离奇的梦也是冒险者的乐园不在乎你在不在乎新的世界依旧美丽…” 乌托邦如此美好，但在那里，幸福的人们全都是“被幸福的”。你的在乎与否无关紧要，只需要按照秩序继续漫步。 春节把《西部世界》看完，它的一些设定，也很容易看出致敬小说的意思，却又带来了另外的惊喜。片尾Dolores的惊艳一枪尘埃落定，现在已经过去一段时间，花哨的剪辑褪出了印象，细微的东西反而更加深刻了。还是想谈一谈这部作品。(含剧透…)","pubDate":"Fri, 10 Feb 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/02/10/brave-new-world/","category":"杂谈,笔记"},{"title":"回乡偶书 1.18 - 1.25","link":"//htmlk.cn/2017/01/26/diary-2017-0118-0125/","description":"年底恰逢乔迁，回去得比较早。其实也算不上乔迁，爷爷的旧宅子，父辈兄弟合力，翻修重建多了一个出逃城市，到乡村度假的地方。当它以新面貌出现在眼前时不免真的觉得衰败的新生相当感慨。 特别是在年底，这个喜旧迎新的时节好像很多往事，被年关一催，不断提纯又沉淀出了最好的那部分。然后你看着它，只能很简单又笃定的说一声：好棒哦！ 但说起新居入伙，有件事我想起就想笑。大概10岁时，第一次搬家，有个迷之仪式印象太深刻。按着习俗，我左手要拿着一根葱，葱通聪，象征聪明伶俐右手拿一根蒜，蒜通算，意思是会算术。这活脱就是一羞耻的莹草cosplay啊","pubDate":"Thu, 26 Jan 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/01/26/diary-2017-0118-0125/","category":"旧事"},{"title":"把自己锁在杯子里","link":"//htmlk.cn/2017/01/10/lock-me-in-a-cup/","description":"杯子里的一条鱼你可担心会有天外扑来的龙卷风把你的魂魄摄出领地？泳池温热，心脏被灌了风，开垦者默言而卧涛声隐隐作痛若是一壶热酒浇下，由西向东你是缱绻醉倒？还是鱼跃入梦？ —— 01.10","pubDate":"Tue, 10 Jan 2017 12:30:00 GMT","guid":"//htmlk.cn/2017/01/10/lock-me-in-a-cup/","category":"旧事,药别停"},{"title":"薛定谔的年 1.1 -1.7","link":"//htmlk.cn/2017/01/08/diary-2017-0101-0107/","description":"传说中，现在这段元旦到除夕的时间由于不知该称之“今年”或“明年”有人就说，叫薛定谔的年好了！这么一想，好像许多东西都可以跟薛定谔扯上关系。 比如这周，每天醒来第一件事就是到12306查一下有没有薛定谔的票有了，就输入那个神才知道对不对的薛定谔验证码去完成这笔的鬼才知道成不成功的薛定谔订单 这世道，上半年的代码，到下半年能不能编译都要打个问号就不要试想真切地看清这繁花世界啦。Mr.Big不断重复着：Oh baby baby it’s a wild world…有时候发现我等的就是这几个字。","pubDate":"Sun, 08 Jan 2017 02:36:00 GMT","guid":"//htmlk.cn/2017/01/08/diary-2017-0101-0107/","category":"旧事"},{"title":"旧事 年末","link":"//htmlk.cn/2016/12/31/diary-2016-1225-1231/","description":"每年这个时候都要趴在这座天桥，拍一张照看着这个世界似乎没变，但又在喧哗和前行。 这年成长了挺多，也学会看淡一些事情可能是代码写多了，感觉世界的逻辑有时很简单。事情无非是let，变化历历或者是const，永恒安息 如果一开始就想清楚，留不住的就随风去，不会变的就钉到骨子里。那你说多轻松。","pubDate":"Sat, 31 Dec 2016 02:36:00 GMT","guid":"//htmlk.cn/2016/12/31/diary-2016-1225-1231/","category":"旧事"},{"title":"当我想用css3实现一个动作类库","link":"//htmlk.cn/2016/12/31/css3-animater/","description":"当我如是想的时候，事实上我已想了很久。后来被各种纠结的差事冲乱了生活和心绪，并且心里认为这是个妥当无比的借口。找到了借口后一拖再拖，果然认识到deadline才是第一生产力的真理。最近，却是被朋友的一句话逼急了，他跟我说：我们的业务用到了css4的新属性！ 这句话的意思，大体等同于说，我买到了一个iphone6，亲你怎么看？","pubDate":"Fri, 30 Dec 2016 16:02:00 GMT","guid":"//htmlk.cn/2016/12/31/css3-animater/","category":"css3"},{"title":"生产者-消费者模型的coffeescript实现","link":"//htmlk.cn/2016/12/24/coffee-pc/","description":"这两天一直在看coffeescript相关的东西，也帮一个朋友搞了个生产者-消费者模型的C语言实现。想到还没用coffeescript真正意义上写过程序，那就尝试做一下吧。 其实《CoffeeScript小书》是暑假实习时就买了，一直比较向往着函数式编程却拖延了很久没行动起来。小书只有几十页，本是github上一个开源的项目，我喜欢这种轻巧的文字。语法部分看下来，再看下类与继承，只花了半天的时间，而且心情非常愉悦，然后就可以开始我菜鸟的第一次试飞了。 生产者-消费者模型没什么好说的了，就是读写共享缓冲区，pv操作控制是否冲突。更多的就是冲着coffeescript来的。下面是一些凌乱但自认为有思考价值的记录，或许后续我会继续写一些coffeescript的学习笔记，再做深入的研究。","pubDate":"Sat, 24 Dec 2016 15:51:00 GMT","guid":"//htmlk.cn/2016/12/24/coffee-pc/","category":"js,coffeescript"},{"title":"像素级细节：移动端1px border的实现","link":"//htmlk.cn/2016/12/22/thinner-than-1px-border/","description":"请记住，每个尽责的设计师都是处女座… 这里…没有黑处女座的意思，只是想借题发挥，并由衷的跪倒在强大的“像素眼”之下。","pubDate":"Thu, 22 Dec 2016 12:11:00 GMT","guid":"//htmlk.cn/2016/12/22/thinner-than-1px-border/","category":"html5,css3"},{"title":"css实现九宫格(二)","link":"//htmlk.cn/2016/12/21/css-jiugongge2/","description":"书接上回，上回在这。 9个元素，每个50*50px，排成九宫格默认是border颜色为blue，hover到格子上变成red（兼容到IE6） 题目的关键是解决“公用边”，上次我主要做了两个方面的尝试： 用负margin使元素的border叠加用table的border-collapse实现边框合并 这一次的思路则更加简明，也是个人认为是更好的方法。感谢队长提供的思路。","pubDate":"Wed, 21 Dec 2016 05:54:00 GMT","guid":"//htmlk.cn/2016/12/21/css-jiugongge2/","category":"css"}]}